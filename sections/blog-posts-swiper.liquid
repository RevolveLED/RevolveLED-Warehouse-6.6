{{ 'blog-posts-swiper.css' | asset_url | stylesheet_tag }}
{{ 'blog-posts-card.css' | asset_url | stylesheet_tag }}
{%- capture section_settings -%}
{
  {% comment %} "slidesPerGroup": 4 {% endcomment %}
  {% comment %} "slidesPerGroupMobile": 2 {% endcomment %}
}
{%- endcapture -%}
{% liquid
  if section.settings.image_lazy
    assign image_lazy = 'lazy'
  else
    assign image_lazy = ''
  endif
%}
<section
  class="section blog-posts-swiper index-section"
  data-section-id="{{ section.id }}"
  data-section-type="blog-posts-swiper"
  data-section-settings="{{ section_settings | escape_once }}"
>
  <div
    class="blog-posts-swiper-section__container container"
  >
    <div class="blog-posts-swiper-section__content-container">
      <div class="blog-posts-swiper-section__content-wrapper index-section__header-button_inversion">
        {%- if section.settings.title != blank -%}
          <header class="section__header index-section__header">
            <h2 class="heading h3 index-section__title">{{ section.settings.title }}</h2>
          </header>
          {% if section.settings.show_button %}
            <div class="section__header-button-container">
              <a
                class="section__header-button"
                aria-label="{{ section.settings.link_title }}"
                href="{{ section.settings.blog.url}}"
              >
                {{ section.settings.link_title }}
              </a>
            </div>
          {% endif %}
        {%- endif -%}
        {%- if section.settings.blog != blank -%}
          {% assign blog = section.settings.blog %}
          <div class="blog-posts-swiper-section__swiper-container">
            <div class="swiper">
              <div class="swiper-wrapper">
                {% for article in blogs[blog].articles limit: section.settings.limit %}
                  {%- render 'blog-posts-custom-card', article: article, swiper: true, loading_type: image_lazy -%}
                {% endfor %}
              </div>
              <div class="custom-swiper-pagination swiper-pagination"></div>
            </div>
            {% comment %} <div class="custom-swiper-button swiper-button-prev">
              {% render 'icon', icon: 'custom-swiper-prev' %}
            </div>
            <div class="custom-swiper-button swiper-button-next">
              {% render 'icon', icon: 'custom-swiper-next' %}
            </div> {% endcomment %}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</section>
{% schema %}
{
  "name": "Featured products swiper",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading"
    },
    {
      "type": "checkbox",
      "id": "show_button",
      "label": "Show button",
      "default": false
    },
    {
      "type": "text",
      "id": "link_title",
      "label": "Link title",
      "default": "View All"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Blog"
    },
    {
      "type": "range",
      "id": "limit",
      "min": 4,
      "max": 8,
      "step": 1,
      "label": "Limit articles showed",
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "image_lazy",
      "label": "Image lazy loading",
      "default": false
    }
  ],
  "presets": [
    {
      "category": "Blog",
      "name": "Blog posts swiper",
      "settings": {}
    }
  ]
}
{% endschema %}
