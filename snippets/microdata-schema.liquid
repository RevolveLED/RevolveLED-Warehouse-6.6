{%- comment -%}
This snippet structures the micro-data using JSON-LD specification. Starting from Prestige 10, we are using
the structured_data built-in filter to ensure that Shopify can keep it up to date without requiring theme upgrade. If
you believe some information for products are missing, please reach Shopify support directly, as it is no longer
managed at the theme level.
{%- endcomment -%}
{% assign url = shop.url %}
{%- if request.page_type == 'product' -%}
  {% comment %} <script type="application/ld+json" class="product-seo-json">
    {{- product | structured_data -}}
  </script> {% endcomment %}
    {%- assign review_count = product.metafields.judgeme.badge
    | split: "data-number-of-reviews='"
    | last
    | split: "'"
    | first
    | plus: 0
  -%}

  {%- assign review_value = product.metafields.judgeme.badge
    | split: "data-average-rating='"
    | last
    | split: "'"
    | first
    | plus: 0
  -%}

  <script type="application/ld+json" class="product-seo">
  {
    "@context": "http://schema.org/",
    "@type": "{% if product.variants %}ProductGroup{% else %}Product{% endif %}",
    {% if product.variants %}
    "productGroupID": "{{ product.id }}",
    {% endif %}
    "@id": {{ canonical_url | append: '#product' | json }},
    "name": "{{ product.title | strip_html | escape | replace: '"', '' }}",
    "url": "{{ shop.url }}{{ product.url }}",

    {% if product.first_available_variant.sku != blank %}
      "sku": "{{ product.first_available_variant.sku }}",
    {% else %}
      "sku": "{{ product.first_available_variant.id }}",
    {% endif %}

    {% if product.first_available_variant.barcode.size == 8 %}
      "gtin8": {{ product.first_available_variant.barcode }},
    {% endif %}

    {% if product.first_available_variant.barcode.size == 12 %}
      "gtin12": {{ product.first_available_variant.barcode }},
    {% endif %}

    {% if product.first_available_variant.barcode.size == 13 %}
      "gtin13": {{ product.first_available_variant.barcode }},
    {% endif %}

    {% if product.first_available_variant.barcode.size == 14 %}
      "gtin14": {{ product.first_available_variant.barcode }},
    {% endif %}

    "brand": {
      "@type": "Brand",
      "name": "{{ product.vendor | escape  | default : 'RevolveLED' }}"
    },
    "description": "{{ product.description | strip_html | strip_newlines | strip | remove: '"' | replace: '&gt;', '' | default: product.title | strip_html | escape | replace: '"', '' }}",
    "image": "https:{{ product.featured_image.src | image_url: width: 100 }}",
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": 5,
      "bestRating": 5,
      "worstRating": 0,
      "reviewCount": {% if review_count <= 0 %}1{% else %}{{ review_count }}{% endif %}
    },
    "review": {
      "@type": "Review",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": 4,
        "bestRating": 5
      },
      "author": {
        "@type": "Person",
        "name": "Fred Benson"
      }
    },
    "offers": {
      "@type": "AggregateOffer",
      "priceCurrency": "{{ shop.currency }}",
      "lowPrice": "{{ product.price_min  | money_without_currency   | strip_html }}",
      "highPrice": "{{ product.price_max   | money_without_currency  | strip_html  }}",
      "priceValidUntil":"2030/12/12",
      "shippingDetails": {
      "@type": "OfferShippingDetails",
      "shippingRate": {
        "@type": "MonetaryAmount",
        "value": 0,
        "currency": "USD"
      },
      "shippingDestination": {
        "@type": "DefinedRegion",
        "addressCountry": "US"
      },
      "deliveryTime": {
        "@type": "ShippingDeliveryTime",
        "handlingTime": {
          "@type": "QuantitativeValue",
          "minValue": 1,
          "maxValue": 2,
          "unitCode": "DAY"
        },
        "transitTime": {
          "@type": "QuantitativeValue",
          "minValue": 3,
          "maxValue": 7,
          "unitCode": "DAY"
        }
      },
      "shippingSettingsLink": "https://revolveled.com/pages/shipping-policy",
      "freeShippingThreshold": {
        "@type": "MonetaryAmount",
        "value": 199,
        "currency": "USD"
      }
    },
      "hasMerchantReturnPolicy": {
        "@type": "MerchantReturnPolicy",
        "applicableCountry": "US",
        "returnPolicyCategory": "https://schema.org/MerchantReturnFiniteReturnWindow",
        "merchantReturnDays": 45,
        "returnMethod": "https://schema.org/ReturnByMail",
        "returnFees": "https://schema.org/ReturnShippingFeesCustomerResponsibility",
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "Reward Lighting Members",
            "value": "90 days return window"
          },
          {
            "@type": "PropertyValue",
            "name": "Restocking Fee",
            "value": "Up to 20% in some circumstances"
          },
          {
            "@type": "PropertyValue",
            "name": "Non-returnable Items",
            "value": "Installed items, Special Order, Made To Order, Custom Products, some Clearance items"
          }
        ],
        "returnPolicyUrl": "https://revolveled.com/pages/return-policy",
        "returnShippingAddress": {
          "@type": "PostalAddress",
          "streetAddress": "1520 Broadmoor Blvd. Ste. B.",
          "addressLocality": "Buford",
          "addressRegion": "GA",
          "postalCode": "30518",
          "addressCountry": "US"
        }
      },
      "name": "Fred Benson",
      "offerCount": "{% assign count = 0 %}{% if product.available %}{% for variant in product.variants %}{% assign count =  count | plus : variant.inventory_quantity %}{% endfor %}{% endif %}{% if count <= 0 %}1{% else %}{{ count }}{% endif %}",

      {% if product.variants %}
        "hasVariant": [
          {% for variant in product.variants %}
          {
            
            "@id": "{{ variant.url | append: '#variant' | json }}",
            "@type": "Product",
            {% if variant.sku != blank %}
              "sku": "{{ variant.sku }}",
            {% else %}
              "sku": "{{ variant.id }}",
            {% endif %}

            {% if variant.barcode.size == 8 %}
              "gtin8": {{ variant.barcode }},
            {% endif %}

            {% if variant.barcode.size == 12 %}
              "gtin12": {{ variant.barcode }},
            {% endif %}

            {% if variant.barcode.size == 13 %}
              "gtin13": {{ variant.barcode }},
            {% endif %}

            {% if variant.barcode.size == 14 %}
              "gtin14": {{ variant.barcode }},
            {% endif %}
            "image": "https:{{ variant.image.src | image_url: width: 100 }}",
            "name": "{{ variant.title | strip_html | escape | replace: '"', '' }}",
            "description": "{{ product.description | strip_html | strip_newlines | strip | remove: '"' | replace: '&gt;', '' | default: product.title | strip_html | escape | replace: '"', '' }}",
            {% for option in product.options %}
              "{{ option }}": "{{ variant.options[forloop.index0] }}",
            {% endfor %}
            "offers": {
              "@type": "Offer",
              "url": "{{ variant.url }}",
              "priceCurrency": "{{ shop.currency }}",
              "price": {{ variant.price | money_without_currency  | strip_html }},
              "itemCondition": "https://schema.org/NewCondition",
              "availability": "https://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}",
              "shippingDetails": {
                "@type": "OfferShippingDetails",
                "shippingRate": {
                  "@type": "MonetaryAmount",
                  "value": 0,
                  "currency": "USD"
                },
                "shippingDestination": {
                  "@type": "DefinedRegion",
                  "addressCountry": "US"
                },
                "deliveryTime": {
                  "@type": "ShippingDeliveryTime",
                  "handlingTime": {
                    "@type": "QuantitativeValue",
                    "minValue": 1,
                    "maxValue": 2,
                    "unitCode": "DAY"
                  },
                  "transitTime": {
                    "@type": "QuantitativeValue",
                    "minValue": 3,
                    "maxValue": 7,
                    "unitCode": "DAY"
                  }
                }
              },
              "hasMerchantReturnPolicy": {
                "@type": "MerchantReturnPolicy",
                "applicableCountry": "US",
                "returnPolicyCategory": "https://schema.org/MerchantReturnFiniteReturnWindow",
                "merchantReturnDays": 45,
                "returnMethod": "https://schema.org/ReturnByMail",
                "returnFees": "https://schema.org/ReturnFeesCustomerResponsibility",
                "inStoreReturnFees": "https://schema.org/FreeReturn"
              }
            }
          }{% unless forloop.last %},{% endunless %}
        {% endfor %}
        ],
      {% endif %}
      {% if product.variants %}
        "offers": [
          {% for variant in product.variants %}
            {
              "@type" : "Offer",
              "priceCurrency": "{{ shop.currency }}",
              "price": "{{ variant.price | money_without_currency  | strip_html }}",
              "itemCondition" : "http://schema.org/NewCondition",
              "availability" : "http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}",
              "url" : "{{ shop.url }}{{ variant.url }}",
              "priceValidUntil":"2030/12/12",
              "hasMerchantReturnPolicy": {
                "@type": "MerchantReturnPolicy",
                "applicableCountry": "US",
                "returnPolicyCategory": "https://schema.org/MerchantReturnFiniteReturnWindow",
                "merchantReturnDays": 45,
                "returnMethod": "https://schema.org/ReturnByMail",
                "returnFees": "https://schema.org/ReturnFeesCustomerResponsibility",
                "inStoreReturnFees": "https://schema.org/FreeReturn"
              },
              "shippingDetails": {
                "@type": "OfferShippingDetails",
                "shippingRate": {
                  "@type": "MonetaryAmount",
                  "value": 0,
                  "currency": "USD"
                },
                "shippingDestination": {
                  "@type": "DefinedRegion",
                  "addressCountry": "US"
                },
                "deliveryTime": {
                  "@type": "ShippingDeliveryTime",
                  "handlingTime": {
                    "@type": "QuantitativeValue",
                    "minValue": 1,
                    "maxValue": 2,
                    "unitCode": "DAY"
                  },
                  "transitTime": {
                    "@type": "QuantitativeValue",
                    "minValue": 3,
                    "maxValue": 7,
                    "unitCode": "DAY"
                  }
                }
              }
              {% comment %} ,"itemOffered" :
              {
                  "@type" : "Product",
                  {% if variant.image %}
                    {% assign variant_image_size = variant.image.width | append: 'x' %}
                    "image": "http:{{ variant.image.src | image_url: variant_image_size }}",
                  {% else %}
                    "image": "http:{{ product.featured_image.src | image_url: width: 100 }}",
                  {% endif %}
                  {% if variant.title != blank %}
                    "name" : "{{ variant.title | escape | replace: '"', ''}}",
                  {% endif %}
                  {% if variant.barcode.size == 12 %}
                    "gtin12": "{{ variant.barcode }}",
                  {% endif %}
                  {% if variant.barcode.size == 13 %}
                    "gtin13": "{{ variant.barcode }}",
                  {% endif %}
                  {% if variant.barcode.size == 14 %}
                    "gtin14": "{{ variant.barcode }}",
                  {% endif %}
                    "brand": "{{ product.vendor }}",
                  {% if variant.description != blank %}
                    "description" : "{{ variant.description | strip_html  | remove: '"' | remove :'&amp;' | default: product.title | strip_html | escape | replace: '"', '' }}",
                  {% else %}
                    "description" : "{{ product.description | strip_html  | remove : '"' | remove :'&amp;' | default: product.title | strip_html | escape | replace: '"', '' }}",
                  {% endif %}
                  {% if variant.sku != blank %}
                    "sku": "{{ variant.sku }}",
                    {% else %}
                    "sku": "{{ variant.id }}",
                  {% endif %}
                  {% if variant.weight != blank %}
                    "weight": {
                      "@type": "QuantitativeValue",
                      {% if variant.weight_unit != blank %}
                        "unitCode": "{{ variant.weight_unit }}",
                      {% endif %}
                      "value": "{{ variant.weight | weight_with_unit: variant.weight_unit }}"
                    },
                  {% endif %}
                  "offers":[{
                    "@type" : "Offer",
                    "priceCurrency": "{{ shop.currency }}",
                    "price": "{{ variant.price | money_without_currency  | strip_html }}",
                    "itemCondition" : "http://schema.org/NewCondition",
                    "availability" : "http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}",
                    "url" : "{{ shop.url }}{{ variant.url }}",
                    "priceValidUntil":"2030/12/12",
                    "hasMerchantReturnPolicy": {
                      "@type": "MerchantReturnPolicy",
                      "applicableCountry": "US",
                      "returnPolicyCategory": "https://schema.org/MerchantReturnFiniteReturnWindow",
                      "merchantReturnDays": 45,
                      "returnMethod": "https://schema.org/ReturnByMail",
                      "returnFees": "https://schema.org/ReturnFeesCustomerResponsibility",
                      "inStoreReturnFees": "https://schema.org/FreeReturn"
                    },
                    "shippingDetails": {
                      "@type": "OfferShippingDetails",
                      "shippingRate": {
                        "@type": "MonetaryAmount",
                        "value": 0,
                        "currency": "USD"
                      },
                      "shippingDestination": {
                        "@type": "DefinedRegion",
                        "addressCountry": "US"
                      },
                      "deliveryTime": {
                        "@type": "ShippingDeliveryTime",
                        "handlingTime": {
                          "@type": "QuantitativeValue",
                          "minValue": 1,
                          "maxValue": 2,
                          "unitCode": "DAY"
                        },
                        "transitTime": {
                          "@type": "QuantitativeValue",
                          "minValue": 3,
                          "maxValue": 7,
                          "unitCode": "DAY"
                        }
                      }
                    }
                  }],
                  "url": "{{ shop.url }}{{ variant.url }}"
                  {% if review_count > 0   %}
                  ,"aggregateRating": {
                    "@type": "AggregateRating",
                    "ratingValue": {{ review_value }},
                    "bestRating": 5,
                    "worstRating": 0,
                    "reviewCount": {% if review_count <= 0 %}1{% else %}{{ review_count }}{% endif %},
                    "itemReviewed":"Product"
                  }
                  {% endif %}
              } {% endcomment %}
            }{% unless forloop.last %},{% endunless %}
          {% endfor %}
        ]
      {% endif %}
    }
  }
  </script>
{%- elsif request.page_type == 'article' -%}
  <script type="application/ld+json">
    {{- article | structured_data -}}
  </script>
{%- endif -%}

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": {{ 'general.breadcrumb.home' | t | json }},
        "item": "{{ shop.url }}"
      }

      {%- if request.page_type == 'product' -%}
        {%- if collection -%}
          ,{
            "@type": "ListItem",
            "position": 2,
            "name": {{ collection.title | json }},
            "item": "{{ shop.url }}{{ collection.url }}"
          }, {
            "@type": "ListItem",
            "position": 3,
            "name": {{ product.title | json }},
            "item": "{{ shop.url }}{{ product.url }}"
          }
        {%- else -%}
          ,{
            "@type": "ListItem",
            "position": 2,
            "name": {{ product.title | json }},
            "item": "{{ shop.url }}{{ product.url }}"
          }
        {%- endif -%}
      {%- elsif request.page_type == 'collection' -%}
          ,{
            "@type": "ListItem",
            "position": 2,
            "name": {{ collection.title | json }},
            "item": "{{ shop.url }}{{ collection.url }}"
          }
      {%- elsif request.page_type == 'blog' -%}
          ,{
            "@type": "ListItem",
            "position": 2,
            "name": {{ blog.title | json }},
            "item": "{{ shop.url }}{{ blog.url }}"
          }
      {%- elsif request.page_type == 'article' -%}
          ,{
            "@type": "ListItem",
            "position": 2,
            "name": {{ blog.title | json }},
            "item": "{{ shop.url }}{{ blog.url }}"
          }, {
            "@type": "ListItem",
            "position": 3,
            "name": {{ blog.title | json }},
            "item": "{{ shop.url }}{{ article.url }}"
          }
      {%- elsif request.page_type == 'page' -%}
        ,{
            "@type": "ListItem",
            "position": 2,
            "name": {{ page.title | json }},
            "item": "{{ shop.url }}{{ page.url }}"
          }
      {%- endif -%}
    ]
  }
</script>

{%- if request.page_type == 'index' -%}
  {%- assign potential_action_target = request.origin | append: routes.search_url | append: "?q={search_term_string}" -%}

  <script type="application/ld+json">
  [
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": {{ shop.name | json }},
      "url": {{ shop.url | append: page.url | json }},
      "potentialAction": {
        "@type": "SearchAction",
        "target": {{ potential_action_target | json }},
        "query-input": "required name=search_term_string"
      }
    },
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": {{ shop.name | json }},
      {%- if shop.brand.logo -%}
        "logo": {{ shop.brand.logo | image_url: width: shop.brand.logo.width | prepend: "https:" | json }},
      {%- endif -%}
      {%- if shop.brand.short_description -%}
        "description": {{ shop.brand.short_description | json }},
      {%- endif -%}
      {%- if shop.brand.slogan -%}
        "slogan": {{ shop.brand.slogan | json }},
      {%- endif -%}
      {%- if shop.brand.metafields.social_links.size > 0 -%}
        "sameAs": [
          {%- for social_link in shop.brand.metafields.social_links -%}
            {{- social_link.last.value | json -}}{%- unless forloop.last -%},{%- endunless -%}
          {%- endfor -%}
        ],
      {%- endif -%}
      "url": {{ shop.url | append: page.url | json }}
    }
  ]
  </script>
{%- endif -%}